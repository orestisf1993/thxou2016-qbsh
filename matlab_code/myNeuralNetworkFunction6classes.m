function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 24-Dec-2016 16:01:45.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 14xQ matrix, input #1
% and returns:
%   y = 6xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [0.310366573397181;0.372963628847019;0.267919188711523;0.320510920199724;0.265223271316369;0.250998663793316;0.313632107886846;0.305168442605917;0.298072935097354;0.285435429008016;0.282799287188694;0.366098955837076;0.269699285508046;0.244939673596317];
x1_step1_gain = [0.640245529658591;0.842842418111075;0.666524965814825;0.65928871739007;0.693517103335761;0.893925922288297;0.67241530700313;0.68243246808237;0.76092426233936;0.690283802473343;0.735945997262488;0.763197459619841;0.729289655655896;0.619560541666303];
x1_step1_ymin = -1;

% Layer 1
b1 = [-2.3401173772749759294;1.3990983535403973548;-1.4580970901479151092;-1.6191950295174371011;0.53090651889131468266;-0.98532514230081591489;1.2188683829292406013;1.1685713777130064539;-0.7057271614092575085;-0.54287517219421876913;0.65744498709550525106;-0.49469047396826459906;-0.27109112988801459254;-0.1338790371462625084;0.078106761467050353498;-0.5214187865973068936;0.49882579532167409253;0.45830936854840398365;-0.76484338062550194515;-0.96620131496929761994;-0.86198884791273588935;0.75184375124270075297;-1.5492332057510289633;1.1153099716379943906;-1.394244885009476187;-0.95564165156641023291;-1.4591633983834015886;-2.5163688045573628926];
IW1_1 = [0.65436967524172784394 0.65733298522465732905 -0.22795689778020442051 0.3525285892399145915 -0.14931265145090902302 0.24441252138662691862 0.2538991981868910508 0.826537676874109839 -0.4264934586593271959 0.75354223531969066752 -0.23888695141447982562 0.44965589060871052896 -0.33930541566936073261 0.16346506860826973129;-0.31567261449606404122 -1.0654817992467779941 0.73616905643379570989 0.70685851418185263739 0.23546055635175514031 -0.84941562313674656703 0.097918828769147675528 -0.18771473594587395617 -0.026157745542785541815 -0.12896109727803931055 0.3525814971720119817 -0.27394630554547599877 0.89901775030486996698 0.65471283129400958956;0.42433075213479853893 -0.061992124029226075566 0.71587501231004058155 0.0005010137082298748339 0.35206656778879796832 -0.23665399344919771374 1.02704523933579428 -0.1782389684529310514 -0.19574321645704742534 -0.27624463790275372022 0.17638743269379972278 -0.90243426014819816405 -0.34601178240986141255 -0.81178230557202846196;0.45784017176889652001 0.22038099092741705864 0.6397919823096845926 -0.31041406569975554808 -0.36295146366415004247 0.63859393967140132276 -0.12909548689407876476 0.51857884716651259094 -0.52399167733303819716 0.74652932703846008877 0.4623818999778634975 0.30434759814501466391 -0.45166259724548185606 -0.14676032975133099234;0.22454329433560235585 -0.20055556752381761831 0.78212210763038292338 0.30855469176154720623 0.89660305006513241199 0.18333250001773068738 0.56246879423762363714 0.90212321610400980632 0.9190977779048943308 1.0277406880992485672 0.23632176250093153702 0.63778572721464454887 0.64657914945346861568 0.72098881443813300773;-0.13724118792191136729 -2.1221716208671477233 0.27258248585543931597 2.4356461043988542059 -1.2169387789612393647 0.37208190999396012488 -0.68151524788422435108 -1.8413559805208310483 -0.39340598636623447248 -0.09417911048982928468 1.4156071203857714114 -0.18861255484000424842 0.47956492102627834573 -0.60518505155620039293;-0.53316901826193485725 0.041536366121160475662 0.21435289726536654875 0.81275712668532951177 -0.066703318656419638422 -0.13724886690166201997 0.045624911791660296978 -0.89903583564765032765 0.21203147288183935015 -0.50543026579086158812 0.03765954985480885614 -0.070473973344381338202 -0.1940633979633892281 -0.69056311404596171233;-0.94911633635433367839 -0.06760108640778866862 0.88050892155037852049 -0.56042833270372516274 0.39163531568130099947 0.31383278981413081921 0.27586918441692648285 0.25914389132840504049 -1.3322765857887839402 0.18477673873238034674 0.079114020191372744217 -0.071642649209531159005 0.17162080748508440342 0.23349188710437907002;0.64002191046131684526 1.5007887555967815985 0.25399594558289484425 -0.057030470258484976254 -0.077894591661951284589 -0.3330815788200626737 -1.3924553073119738666 -1.3112131066825671866 -0.17340538937385169271 1.8957843795028572753 0.29388159525768819957 1.0777629733602454021 -0.2554299365624785878 -1.0231669973331687373;-0.20396014205031468003 0.024330730711704353503 -1.3648606106072398436 -1.2657872784568395819 -0.70224866934282481612 0.75728028829514726361 0.52351640513252850617 -1.0710654680902733649 1.135133593699628074 2.1193181897914996625 -1.943751617407535992 0.45183696191346983673 -0.22881423626133465254 -0.42479084482361217923;-0.72089275287334519948 -2.1889865761203886052 -0.69973592857328692496 0.087062247522602387306 0.51301478016339363553 0.29793520984285543074 0.051991649689187832695 0.35203798291617588445 0.97760459993111303856 -0.090246245547316403246 -0.28933790406401571627 -1.2160083963714742872 -0.041699717211340477097 1.0024606152003450177;0.14624406154539518199 -0.59321239750892829079 -0.59112365294576385555 -0.70269586847399556628 0.58460520983152164387 -0.34224675529484549497 -0.27419060549108020819 -0.48940089034526312872 -1.1774984442702014498 0.51056417012785126897 0.42533724092715263776 0.35043416733468846225 1.3747340786569677284 -0.22232229962173083448;-0.0037690549226118714304 -0.84277871742583376768 -0.46038019816268799245 -0.85396682219029618199 -0.46246357819702915704 -0.015268060415740497548 1.6918389508429270141 -0.33833318858758754111 0.099048123386197575724 0.55326964246342114073 1.0335151719089101796 -0.23251629183701369441 0.35279417098432291899 -0.74425262464611874336;0.16954986301917343572 0.16398815703651947739 -0.1015664377787244832 0.37951069690863781236 0.15569274168026370209 1.6171000310528622634 0.36816652515012654456 -0.22774279664787089317 -0.56453425399280343644 0.37789288257347425359 0.72277081773469153969 0.28405340129810613403 -0.53489998103930969098 -0.27471283700641346837;0.24648415391002084784 -0.57545787833454331572 0.22504243937478529691 -0.83693395283407390206 -3.0469658185271426554 -0.22516833608465855465 -0.24224464081996599507 0.11061715950989950419 0.96626330714275265876 0.65680958265886368874 1.445291953316298228 0.23071410218945778703 0.58679643680401560868 1.1468170957254562037;-0.49618853192753131776 1.8591864781784377403 0.89300206578569185645 0.96294857709481584962 0.86738121185287186954 -0.09531661130404849025 -0.61116832024074407848 0.54018935808191981263 -3.3262223313591396945 -0.27893974270237187341 -0.94490769646136274496 0.94820540291699262347 -0.25985291459905829337 0.52179820573973567654;2.3115395283476556365 2.5713524752335983337 0.0077493197661836739701 0.042400531001389719921 -1.0880828304704615039 -0.75874020550939791363 -0.34868227375385768552 -0.0313163740197184709 -0.59038974954490619496 -0.57099681627599629952 -0.34332030012195324797 -0.2113566540891325396 -1.423728805714421064 -0.64685351857258499564;-0.18098678492920822203 0.78840828672140961242 0.22972507754319146378 2.3234271496721561334 0.19365709697625194119 -0.0098033303461288884284 -0.0054648081210867983926 -2.2335816829925101423 0.19728676218872631676 -0.4276789167775583711 0.098707601816311121845 0.2401952813874789483 0.22337167001896116036 0.69382633572096130692;-0.30924079036684620769 0.040816456144734995781 -0.035598555564454195665 0.82374200014772025469 0.002926088540078471828 0.41922691280832491412 0.10463465066429299133 0.9159777166399083459 -0.37043831415534844709 0.64870324247035315857 -0.31061689097337519261 0.31971387086803748634 -0.5597478595634075571 0.8107953776875160834;-0.45135781522213586081 -0.15029415702482429307 0.51441316162636341325 0.68183052234673258152 0.014032142314942217323 0.70797438505747245507 -0.17553292291941377523 0.40605030538702929777 0.47627842884537385792 0.4850520441523410442 0.42276329016536878802 0.7771369158913166153 0.39038306348175205729 0.65381346199131817887;0.38440541453502519165 -0.61513304546843705634 0.47869331627613681546 -0.181202500969150887 0.80516182800615743176 0.35484971363562300972 -0.11797239634111035544 0.26496287294909409704 1.9756397425659164568 0.12820357873517185254 -1.3640305759117932194 -1.6180827027435691345 -1.1907982481514101103 -0.58794356828698213224;1.259149512611011712 0.076722871383827148661 -0.68586113308786300635 1.0911455928937865423 1.0628099889044371196 -0.17418575207569750307 0.52770129772927421019 -1.2832358541772741489 0.26454979656733657034 -0.51671927223543701047 0.06700797699925822859 -1.1465074727589923409 -0.64625730662830949136 -0.01812489905879412222;0.15769612786054051923 0.34829903770513209738 0.60942268106697128349 0.12955192845594887263 -0.53763722980615957781 0.4805634154701052263 0.031713162977316466939 0.51666383550387140478 -0.093239617724892392969 0.51249435137549959052 0.83622823514221500396 0.038906331692344545137 -0.59282399017699505261 -0.14487967863339121233;0.52839964680921747142 4.6734200785108290788 0.16008301839869065741 -0.095279458851717374612 -1.4135617935766888742 0.27153757643512216324 0.37532122984588373038 0.45827015875348348084 0.25728113825570020357 -0.10025651111234479274 0.55660338253460261981 -1.1321795684997839615 0.068846819072552023488 -1.8054519402068784917;0.2602187012501260277 -0.71654819193327590199 0.44557089931350812861 1.2585272684339219307 0.37718187216201209955 0.76240093924785334867 1.2975546567260896058 0.68594827652223777648 -0.8351726191982168368 -1.2497004695961331233 -1.0706147797243346087 -2.0441107828548483738 -1.0795025595613747527 -0.23298077958500179596;-0.76146051219261912113 -1.4345488517240239101 0.29765690073023082229 -0.7621941696304377345 -0.10731792295932600367 -0.41861848190671213654 -0.417022655705355072 -0.55684824148117184617 -0.14882678240179947338 0.021356278748738077855 -0.43434889264335241332 -1.1043474546599609809 -0.052668694185340481084 -0.36441016767847783653;-1.5868179046344228489 -0.21203280389780274073 -0.077961768417456153712 0.77336692002150353442 -0.28443339557917518556 -0.093757306802096984644 0.29881963916913845125 -0.6527929823603026982 1.0933197099625093784 0.56278755675307590156 -1.641314871748172477 -0.39604590100563907829 0.50351895690601178313 0.21617899440293625313;-0.20655154330406994001 0.62475333818729417157 -0.13170101712462825572 0.66374191098919799181 0.15688288366117897343 -0.15572911806142092361 0.70502757987391506678 -0.21282211354472360676 0.7012169202187783501 -0.19087052784036759312 0.079933703581701348595 0.48020468017781620107 0.80162215586950102963 -0.0013089234968930853024];

% Layer 2
b2 = [0.40162688022062376092;-0.19550035815979083242;0.047122645443958131872;-0.51362709901736758322;-0.61481542880137063367;-0.20978053964630877237];
LW2_1 = [-0.11317023253468387611 -0.14785206819682272794 -0.187398910187646206 0.064357392483102793257 0.095240637880441902929 1.2172841486632504093 0.73884850971987203749 0.76678543365541762533 1.2479557633794531313 -0.18691190690027997823 -2.2329381469318572151 -0.80235559989040072804 0.31399238503314919058 -1.0643017404848660323 -1.2780584150456135717 -0.047484930848235212819 -1.655965727776336216 0.68586678047570182049 0.23278711691706530096 0.39050019325527740577 1.9703983680666461442 0.47381213301103813906 -0.33415672664434475925 -0.46587885257497640978 1.6042705118977003131 -0.26801482187413194769 0.28726728145664504055 -0.56362314997539786354;-0.73995113586945859829 -0.47743423072015417352 0.20538031270620199509 0.28320853414461860664 0.57481457373395827837 -2.8704853787702968582 -0.37883588174282578631 -0.24094246297126745149 -0.46105379962075532241 1.0254987561833064369 0.68331657534377421293 1.1874543892999405159 0.83173058168109537114 1.1147126392375252824 0.67468698740835364447 -1.0174210249499335834 -0.14138075932821295155 -0.69713126583771212186 -0.091487332580527727655 0.79765444852807088072 0.82532856500947981981 0.96528019422006194894 0.6495488314013496689 0.90197368727649118725 0.088826445022423691777 -0.66137594918805908684 -0.43497039040995660875 -0.52646089354505321012;-0.27295302645373842321 -0.67594335384880599449 -0.97987047966435092405 -0.14038732312567567262 0.14664808230228448815 -0.78080650261821615832 -0.64680758362696511021 -1.5080456437471501108 -0.45645919186795841371 -0.3500485445762122616 1.0252426788529269697 1.1035158880749007526 0.41950158073012078219 0.6812776212032554124 -0.11698028665379196778 -0.12095762347676808357 -0.62290101639208272921 -0.17421854025265040566 0.51178397741323733428 0.94275418576573932761 -0.28557966931195183369 0.74288844191981306952 0.27312968889517930116 -1.0513530725115212139 -0.21652207925268129873 0.4304325391120559785 -0.30396776307840872589 -0.27159325615754387195;0.87804303579246978373 -0.92055236427788056375 0.12782021850538297092 0.95496666009422337407 0.68321492018821416981 -0.27639256833588443651 -0.98519836435700069988 0.034851195827876046973 -2.2260622705223154227 0.70407057382803350798 0.45758963680244540972 -0.26097625985068667598 1.3092585651055264062 -0.83687157269183265473 1.7011146652800253065 -1.2159981902853507219 0.17208141784800504159 -0.83991175088810121618 -0.68345464552497703359 0.84893339215354823857 -0.31177389684653783464 -1.0616578169591601721 0.7781969355082485329 -0.90330775733525436877 -0.87107376297300476153 0.30641832361680482189 0.32686985472434171296 0.39317928105421562357;0.25408387722441744261 0.91721051865101488332 -0.28594393756539343565 0.84256886780684547844 -0.4597723557408245898 -0.11414751262873794324 -0.54921338735451497026 -0.42177347143727500489 -1.1605947285626190268 -0.062790961646383522399 0.77518250814068490051 0.71940671985547099965 -0.85385039662365302959 -0.080253949064562526972 -0.19515200283253666957 -0.25421564790005901635 1.3501226416854066326 1.1475649399331238065 1.3775600946367787536 -0.36693256370142363076 -0.44053166394954412777 0.78755660954854389555 0.53159391450064530371 1.7912818225008826367 -0.049269875738471163862 -0.60980856392839499769 -0.27873292640827906919 -0.10918849024499480138;-0.58641763405091573702 0.4777888668568772701 0.23680875555267652532 0.20499447236735499067 -0.19185092716287721615 0.52889076507116827841 0.11080119817352312994 -0.6557633809227750854 0.38859891656283096495 -2.2597746030231147252 0.76931878378057794166 0.24272885225076853977 0.18280889683093040632 -0.057916282032076049635 1.3329596384629178729 2.8618913503898770756 0.29141534694174825448 0.83418143551640855371 0.17245456158297958749 -1.2997344846516400985 1.6380932607437834747 0.87971244461971553896 0.021794377060632572074 1.3476303288460613761 -0.86882040494117562801 0.98163345921022471252 2.5502426977508858563 -0.11235558404920921449];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numer = exp(n);
denom = sum(numer,1);
denom(denom == 0) = 1;
a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
