function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 24-Dec-2016 14:01:01.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 14xQ matrix, input #1
% and returns:
%   y = 4xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1_xoffset = [0.310366573397181;0.372963628847019;0.267919188711523;0.320510920199724;0.313832697465759;0.296157780232273;0.343633454925996;0.391508274782889;0.298072935097354;0.383071680953217;0.365189892670658;0.366098955837076;0.269699285508046;0.325446014980259];
x1_step1_gain = [0.640245529658591;0.842842418111075;0.666524965814825;0.65928871739007;0.705407260630018;0.912341026312127;0.679266856106603;0.804798066111182;0.888048831825465;0.88903273525974;0.758955648930231;0.763197459619841;0.753461757877935;0.635407135748134];
x1_step1_ymin = -1;

% Layer 1
b1 = [1.7511302794102301394;-1.9335597528773078579;2.0283846602936450587;0.75461279563921546121;-0.95832803066279304005;-0.93599798680086088165;-0.67247673243997518888;1.2166659710156106922;1.0078232118243779514;-0.13900592019512342246;0.30767902876403169232;0.51224685371397904454;-1.0714881068561659117;-0.069345597825490046251;0.26971687917839681781;-0.67186552981671199269;-0.059078095644997913327;-0.12791844882692898766;-0.42876336337046799807;-0.61537107807030810847;0.25151761486656804001;-1.2752982675748789632;-0.060705674213950878981;0.81149381775525097904;-1.9988699956482522957;-1.3288264715708915098;0.3760326568682241799;-1.3641629101781063138;-1.4502486586589047324;-2.3470133031961655234];
IW1_1 = [-0.65446077190253082456 -0.57169563741824336311 0.002531756148514710536 0.23805891504721271579 -0.36557592341064787389 0.75498381104321310442 -0.64639255883161106375 -0.08650409580602898274 -0.6945842641576039922 0.15951904063711658255 0.26716272300195403888 0.47392116959514241081 -0.61241410268602769484 -0.35388216320004667326;0.90454017846387124724 0.098978018379094034884 1.2221585079205865565 0.28356058815131202078 -0.037582075185267502238 -0.37820281051647153259 -0.25537586644438781125 0.75548512464005690425 -0.77782858853362912832 -0.86641545207236858595 -0.18259781712629319372 -0.58048505430831232044 0.10861049274941728116 0.8650568491813407368;-0.5233575778687031832 -0.25840081181911422892 -0.27896222992931951623 -0.87041534743964399379 -0.7775280995056399469 -0.64539262419570175844 0.26816052151342445464 0.17398855263445650587 -0.14303262615113054856 -0.61399720907219190735 0.37864200530067332329 -0.86139232868255211084 -0.13322587335791735708 0.2186266334085562868;-0.23462552264596966967 0.82965801423513230173 0.20933863059149843133 0.3445071811354185054 0.20355497299141586676 0.3501849420456601969 0.56028615877586207539 1.0582551441959258121 1.0314093217008202252 1.0858425327731038301 0.61944943341066394105 0.42465325209952958785 0.67264384981192493207 1.4043946817313279762;0.11633951040702859847 -0.16706063625847961118 0.6618829666957780633 -0.1929756131988294432 -0.95147403383274675726 0.93909656361521209877 0.71514884642727138964 0.14001994144705134926 0.043860567866561256389 0.11408266035222393298 -0.87326357293879863786 0.48305771100003574992 -0.29258546893076092799 -0.54943861121107051559;0.50952347006180054301 -0.84665390632880477284 -0.12337575075961970672 0.124110021232027537 -0.94936764979412924248 0.70100189418381642081 0.53847326323804223236 -0.21336150111259705175 0.53542120443021912202 -0.61695664746900269471 0.022091543232739985214 0.19080049884459132636 -0.26805512789565311138 -0.28151923760061253743;0.034991896321569695982 -0.42313908207280581664 -0.25155457792259466876 0.33653745740040302836 -1.6295888740549078211 1.1124112962650276604 0.92165543290654305952 -0.036235542749307736443 0.10160473458312498096 -0.37425686199417401712 0.53913587876848645397 0.04133823915751436151 -0.78001767388963183514 -0.017960915073227154415;-0.29612839591632394987 0.049590220112635710614 -0.80353955327209047876 0.33444361527838700754 0.10978113561471909698 -0.027717636146556770549 -1.0431782832941207673 0.16223740351789264769 0.10297573347875578487 -0.29327743310597659265 0.15855885446715986542 -0.53121927005218816387 -0.6995546112524460014 0.37240129151229361959;-0.67370752139248113455 0.18176157603216569481 -0.13449123064404372441 0.96738619651046642289 1.7805024614482913847 -1.4451054099082547566 -1.0866694779952286165 -1.6911092324297607448 0.12618154538775905316 -0.42246555631277687981 -0.39494110354122569095 -0.57765564114143019836 -1.0048337752474558737 0.034102832915219150056;-0.27844455726111394522 -0.6246602261866606165 -0.28307619539002049081 -1.0470160463833162456 -1.8166569044060807414 -1.8374462629693490978 -0.82401648299304419698 -0.33167107655897215546 -0.86019549306430187485 -1.2367805096917203755 0.1385919408972936806 2.5156767613725294908 1.0708510249754197297 -0.4329270166010315557;-2.3716008095649701026 0.45179720986879656763 0.29064901125684350358 0.60782627845540515565 -0.58703806320919960093 1.0940688460654468539 -0.12786051319526525738 1.5850702353309678028 1.4037835114914285484 -0.066149648597093435587 0.24948844780151005485 0.43123110376174728087 -0.75242745361184970587 1.1133450602280170472;-0.95530905892756434739 -2.2254939773558271021 -0.28834220394693022005 0.79411583806077268299 -0.37278498403321685961 -0.17787565485958301004 -0.39418907722419821438 -0.57753803400984904393 -2.2154156905155266699 0.54994849386080735254 2.3300741613669369023 2.1036525002429842246 0.83145529599871093041 1.2156251602079193308;0.41012731880245545391 0.85910828098453428936 -0.16765160269471079957 1.3044408890864609418 0.081729616781527625324 0.41256478539602531308 0.78113707531713871823 0.96728659909290259922 0.10418840177681146231 -0.24116603642836592636 0.39019136239999391291 0.060526640862910541241 0.82350299782483360467 0.38600702717853618839;-0.17039846917755430145 -3.4730267956416578379 0.54396144554028336149 4.6849090580331580469 -0.19368058954996525411 -0.9257969879955139092 -0.22617989593049098174 -2.868618743659464787 -0.14004796056621743316 -0.39062778182236224112 0.60672266349431958066 0.051157852871466721889 1.0243981559248922508 0.66453584591799474968;0.145932671127668806 -1.312960581530327131 0.5903004532728823861 -0.40264609699766806816 -0.96247580270439414551 -0.84784003914321037776 0.66393123256970576485 -0.39235225058557715583 -0.76795220104474259948 1.105620082858677522 -0.50249787051596417342 1.1708741609391160043 0.64946050489804829642 0.50312763417400052646;1.1613720925416295415 0.12254006380525798992 0.14071095922097395792 0.48419050034712862729 0.86418062900383574299 0.40024102028433067302 0.9414888173375917102 -0.17127509363937287734 0.58333586522638025684 0.45110497413515404652 0.45283590742821111519 0.2592374707039197812 0.30967131304581996254 0.70221540194102627375;-1.7949579322125375214 1.2266653790506147903 1.1743976287541033621 -1.3686954998727709487 0.082690143029334944869 0.87969792328659202063 -0.6970432632116790872 1.0982147066715628458 0.9514704787574609357 0.23029283297326907931 -2.2382028762496712915 -0.42286510863341186806 -0.83302516469940324217 -0.27052227125681410635;0.32944731280724925959 0.64154707260555521309 0.1447140688154640864 -0.69920073263090443128 1.8137449166162429304 -1.0094776971490029283 -0.33708677536867343028 0.88011187148101455158 -0.11015135227136824136 0.27395687357964337849 -0.4842131435387416194 1.1674728614790064185 -0.28409357685323627374 0.50484927725747652527;-0.50128107176327485472 0.60150514399585186531 -0.63775478092586257439 -3.58512085575239281 1.2877338274527341255 -0.11618671084926721071 -0.51058531319014999195 0.4596732522848276381 -0.53823517516973906627 0.1050597777693946383 0.92581128556665481799 0.16523253407586213637 1.462593931134851255 0.3842666142147818098;0.017504798120212244905 -1.6935531236211891493 -0.90002293574854985714 -0.054259547230121274453 -2.9449838702333783758 -0.62991429641772622716 -0.20643480338629111026 0.49988170691353400743 1.5207500874548807168 -0.29879616058544400392 1.2580930889702925946 1.330329635875021177 0.912611296528476168 1.0026562334139037524;0.91565145707826556265 -1.4620918347140094973 1.0829407323781747863 -2.5040165295393084222 0.78517757320307191016 -0.10538021067500852324 0.019583290020989123359 0.33031976212982400165 -0.69252592180183414339 0.18473004766298914414 0.040951730185830099995 1.3387548651950684775 1.3125331583167183513 0.06046436719315989583;0.076032642214492920929 0.76458083937068166414 0.29555382862456319737 0.59777967671534781857 -0.15287030292051401181 -0.3342890356720416567 0.21630363836581797954 0.45784522237548863632 1.1723151005125040935 0.052009174885723326309 0.26928923648301988925 0.59489997718221832024 0.16621079942135774665 0.87891563449496645788;-1.3092979740767765051 0.065199541719054052158 0.25460573821853482723 -0.2493021304858749343 -1.8114447716751749251 -0.91936683607347013947 -0.90339573930765959542 1.0370956858069040329 -0.059236139840111015631 -0.42944288614584563701 -1.177046077822179182 -0.42327184781105964273 -0.61727572241230166394 -0.45665325646969762152;0.32370815318117085457 0.95311167219747650048 -0.21566917377176311743 0.18792679750422849883 0.21894442560226343164 0.20982992036010489345 -0.18973736439110963636 0.17862427602652902747 -0.23755301404421019784 0.74430679281246625578 -1.5123626339319167222 -0.54256506900735368415 -0.61598259348482287123 0.015455567379846154447;-0.0068461516854342735483 -0.20423218995993117075 0.10126432696425352598 1.0493787210172214053 0.48009999864048602536 0.51720350597043507346 0.090136962936813863623 0.79105060809827409951 0.24106606739831726305 0.26783368688951703085 0.34415441855712325392 -0.57793833907168801201 0.014065797392324812937 0.92456353076892372478;-0.99996847844171143915 -0.53046561699762717623 -0.86877861687738022756 1.219065754396445822 0.41485123157054176746 -0.1746776396594822145 0.41024889207770454114 -1.9724219481286080491 0.1493320597352350565 0.81146579505844840252 0.22759218705747305544 0.40285951689893129135 1.2370838063486147007 -0.13409565832593833834;1.7568834463773970178 1.0319053433296843103 0.69998685937446791794 0.40150614910910492616 0.54346282290760017375 1.1118093883979605074 0.89329113911943713866 0.89200897190398176217 0.59610524221348903939 0.66745914809305428861 0.73362584109433226498 0.94446863780100398511 0.011954637968005533966 0.8252597053766119739;-1.069402697760776455 1.0896129035385535566 0.18682412118794627931 -0.61171966473106520468 -0.91418083370317282377 0.33651051131861231536 -0.80403936709376455649 0.71223438783030335042 0.24830131826293477815 -0.74219859001550536615 0.24047549545487253986 -0.026808851665531915898 0.67136880451278402315 -1.01202695431490719;-0.38164491450280674245 0.71991992493491840932 -0.2979346835249443437 3.5962476002214698312 2.0494165384842579769 0.59715284959112568952 -0.43501092535018648366 -1.2620103906177726483 -2.3045188200315820382 -3.7324500054117013548 -1.7542749565874045103 -0.20411301986940322273 -0.86780229400689579133 0.078210686113700703115;0.0599786072989979685 -0.2267475140835613634 -0.27410865861813210609 0.23083256837218610324 0.32663484707921430772 1.8897995007221262131 0.46748860274775089207 -0.05999116233419523464 -0.027191260182335169615 -0.17463426736420353813 0.74881868448698685192 -0.1603194361506568022 0.33843217365785494 -0.31586590253688623386];

% Layer 2
b2 = [0.61063332091838862237;-0.18672851108504165407;-0.4252313745666753686;-0.052047848286234307813];
LW2_1 = [0.54346393614209731471 0.65796028012215079794 0.90373965461107530484 -0.62497558413492571017 -1.2324298547580296859 -0.96744913327978232509 0.25190710650904196699 0.8950035334220269867 0.086168955141150055388 1.0370598093456193656 0.19712021139322383201 0.081611523751281694894 -0.64689976611051025479 0.079669285710074533302 -0.56978659656554253576 0.27014777764606290322 -2.0051170714745714108 0.19926521277377740038 0.49619009832858912423 -0.72150092079904171172 -0.56529386799209868641 0.48122074464839514896 -0.94227971843748492553 -0.49065151444335636244 0.23652543185550076177 1.0502871200081227432 -0.46774862604086941964 -0.81483210423811269774 0.89456765463400167437 -0.58194223797592958825;0.23338748462376970871 0.019414480831881693323 0.30822809488754349116 0.38929193280185059312 -0.12971133961717554173 -0.77495308869076484637 -0.67937304942511800299 0.54407023359823392106 0.52059707122089893261 -1.6740508467725234709 0.93482362055706602622 -0.69153912498238301332 0.33968940832894828352 2.3131404764447065503 -1.4319093863727545557 0.035255492654253525742 -0.69248361404155356347 -0.31893481313918869979 -2.0117248475908944272 -0.64709156806037837484 -2.2406396267738415418 0.022494298882406373041 1.019360234535386045 -0.83042772206574499982 0.10377826935314403423 -0.70276611978419789573 -0.53442180799860616869 0.24628261076220614445 2.3653072623303050825 -0.5094167733381360641;0.84786922858279434312 0.25298172854260447817 -0.67000418005836182012 -0.9697625384299485285 0.67625455753142738047 -0.61194013908035194138 1.0051893903839306255 0.32829123629380319027 0.1467647958170317235 -0.99090102097443288898 -1.1217933139879838755 -1.8621402135675442224 -0.73983545865008382147 -1.6288405839161663735 -0.044830233096900061474 0.052391855651029238528 2.0044665114992525901 1.425457319533216527 0.072911114742858343374 -0.35783266270624708438 1.0895402304141290628 0.29180006015557286014 -0.70553958967362540022 0.71444339263638323434 -0.12956935060261584591 -0.6902357091224416985 0.72994289599065342866 -0.67476354113845771199 -1.0513280335698924617 -0.14549218748108333488;0.26730881511256432415 0.010061377896944966037 -0.84800209906702594953 -0.80052569088989378177 -0.72395493814588052217 0.39755624737511008338 0.2805572563827730681 0.15225686745759153817 -2.4522673632223832563 0.27727932140301886355 1.4430307490322218378 1.1445531072618606583 -0.62500063312594189568 0.14477446440504290748 0.90770633620429141963 -0.3832075165171192066 -0.79175070097033373173 -1.8777763078561351406 -0.67385235038541235753 1.3672191559578263931 0.3841614575739707993 0.23735327676400544417 -0.60507499787515062195 0.2769691991194843661 -0.76242911857564454881 -1.2622485016721638473 0.38939484503135995963 1.1184315468150001216 -1.8416071664814015474 -0.52610659311951790684];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numer = exp(n);
denom = sum(numer,1);
denom(denom == 0) = 1;
a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
